# World Configurator Tool

## Overview

The World Configurator Tool is a desktop application built with **PySide6** designed for game designers and content creators to define, edit, and manage the world configuration data for the RPG project. It provides a user-friendly graphical interface for creating and modifying various aspects of the game world, ensuring data consistency and facilitating the content creation pipeline.

The tool works primarily with **JSON** data files, loading from and exporting to the main game's configuration directory (`config/`), making the generated data directly usable by the core game engine.

## Key Features

*   **Comprehensive World Editing:** Tabbed editors for managing:
    *   **Cultures:** Define cultural groups, values, traditions, and naming conventions.
    *   **Races:** Create and edit playable or NPC races with their attributes.
    *   **Classes:** Define character classes, abilities, and progression.
    *   **Locations:** Design game areas, points of interest, connections, and associated cultures.
    *   **World History:** Create historical eras and significant events.
    *   **Origins:** Define starting scenarios, locations, and conditions for new characters.
    *   **Quests:** Design quests, objectives, and storylines.
    *   **Magic Systems:** Define the rules and elements of magic within the world.
*   **Project Management:**
    *   Create new world configuration projects.
    *   Open, save, and manage project files (`.wcproj` structure, containing JSON data).
*   **Direct Game Integration:**
    *   **Load from Game:** Import existing configuration data directly from the game's `config/` directory (e.g., `config/cultures.json`, `config/locations.json`) into the tool for editing.
    *   **Export to Game:** Export the edited configuration data back to the appropriate JSON files within the game's `config/` directory. Automatic backups of existing files are created during export.
*   **Data Viewing:** View the raw JSON data for different configuration types within the tool.
*   **Settings:** Configure tool-specific settings (future implementation).

## Installation and Dependencies

1.  **Prerequisites:** Ensure you have Python 3.9+ installed.
2.  **Main Project Dependencies:** Install all dependencies for the main RPG project first by running `pip install -r requirements.txt` in the project root directory (`new project/`). The World Configurator relies on packages installed there.
3.  **PySide6:** The primary dependency for the GUI is PySide6, which should be included in the main `requirements.txt`. If not, install it via `pip install PySide6`.
4.  **Editable Install (Optional but Recommended):** For development, you can install the tool in editable mode from the `new project/` directory:
    ```bash
    pip install -e ./world_configurator
    ```
    Alternatively, use the provided batch script:
    ```bash
    install_world_configurator.bat
    ```

## Running the Tool

Launch the tool from the project root directory (`new project/`) using:

```bash
python world_configurator/main.py
```

Or, if installed via `pip install -e`:

```bash
python -m world_configurator.main
```

## Project Structure (`world_configurator/`)

*   `main.py`: Main application entry point.
*   `README.md`: This file.
*   `models/`: Pydantic data models defining the structure for world elements (cultures, locations, origins, etc.).
    *   `base_models.py`: Base Pydantic models and shared structures.
    *   `world_config.py`: Manages the overall world configuration state and managers.
    *   `*_data.py`: Specific data models (e.g., `location_data.py`, `origin_data.py`).
*   `ui/`: PySide6 user interface components.
    *   `main_window.py`: The main application window containing tabs and menus.
    *   `editors/`: Widgets for editing specific data types (e.g., `CultureEditor`, `LocationEditor`).
    *   `dialogs/`: Dialog windows for actions like New Project, Export, Settings.
*   `utils/`: Utility functions.
    *   `file_manager.py`: Handles loading/saving project files and interacting with game config files.
    *   `logging_setup.py`: Configures application logging.
    *   `data_validator.py`: (If present) Utilities for validating data consistency.
*   `data/`: (If used) Default or example data for the tool.
*   `logs/`: Contains log files generated by the tool.

## Usage Workflow

1.  **Launch** the World Configurator.
2.  **Load Data:**
    *   Use **File > Load from Game** to import the current configuration directly from the game's `config/` directory. This is useful for editing existing game data.
    *   Or, use **File > Open Project** to load a previously saved World Configurator project (`.wcproj`).
    *   Or, use **File > New Project** to start a fresh configuration.
3.  **Edit Data:** Navigate through the tabs (Cultures, Locations, Quests, etc.) to add, remove, or modify entries using the specific editors.
4.  **Save Progress:**
    *   Use **File > Save** or **File > Save As...** to save your work as a World Configurator project. This saves the current state within the tool but does *not* update the main game files yet.
5.  **Export to Game:**
    *   When ready to apply changes to the main game, use **File > Export to Game**.
    *   Select the specific components (e.g., Cultures, Locations) you wish to export.
    *   Confirm the export. The tool will write the updated data to the relevant JSON files in the `config/` directory, creating timestamped backups of the original files first.

## Data Integration with the Main Game (`core`)

The World Configurator acts as a dedicated editor for the configuration files located in the main project's `config/` directory (e.g., `config/cultures.json`, `config/locations.json`, `config/quests.json`, etc.).

*   **Loading:** The "Load from Game" feature reads these JSON files directly.
*   **Exporting:** The "Export to Game" feature writes the edited data back into these same JSON files.
*   **Core Engine:** The main game engine (`core/`) is designed to load its world definition, character options, quest data, etc., by reading these JSON files from the `config/` directory at startup or as needed.

Therefore, any data created or modified using the World Configurator and then exported will directly affect the game world experienced by the player when the main game is run.

## Developer Notes

*   **GUI Framework:** PySide6
*   **Data Models:** Pydantic
*   **Data Format:** JSON
*   **Game Config Path:** Interacts with files in the main project's `config/` directory (and its subdirectories like `config/items/`, `config/world/` if they exist and are targeted by specific managers). Backups are created in corresponding `backup/` subfolders within `config/`.
*   **Logging:** Configured via `utils/logging_setup.py`, outputting to `world_configurator/logs/`.
